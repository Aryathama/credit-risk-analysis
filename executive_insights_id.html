<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ringkasan Eksekutif â€” Model Prediksi Kredit</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --paper: #faf8f5;
    --ink: #1a1714;
    --ink-mid: #4a4540;
    --ink-light: #9a948c;
    --rule: #e4dfd8;
    --blue: #1e4a8c;
    --blue-pale: #e8eef7;
    --red: #9c2a1e;
    --red-pale: #f7ece9;
    --amber: #8c5a0a;
    --amber-pale: #fdf3e3;
    --green: #1a5c36;
    --green-pale: #e8f4ed;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--paper);
    color: var(--ink);
    font-family: 'DM Mono', monospace;
    line-height: 1.6;
    min-height: 100vh;
  }

  /* â”€â”€ PAGE SHELL â”€â”€ */
  .page {
    max-width: 860px;
    margin: 0 auto;
    padding: 72px 60px 100px;
  }
  @media (max-width: 640px) { .page { padding: 40px 24px 80px; } }

  /* â”€â”€ HEADER â”€â”€ */
  .report-header {
    border-top: 3px solid var(--ink);
    padding-top: 28px;
    margin-bottom: 64px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px;
    flex-wrap: wrap;
  }
  .report-tag {
    font-size: 9px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--ink-light);
    margin-bottom: 14px;
  }
  .report-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(1.9rem, 4vw, 2.8rem);
    font-weight: 900;
    line-height: 1.15;
    letter-spacing: -0.01em;
    max-width: 500px;
  }
  .report-title em {
    font-style: italic;
    color: var(--blue);
  }
  .report-meta {
    text-align: right;
    font-size: 9px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--ink-light);
    line-height: 2.2;
  }

  /* â”€â”€ SECTION â”€â”€ */
  .section { margin-bottom: 64px; }
  .section-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 32px;
  }
  .section-num {
    font-family: 'Playfair Display', serif;
    font-size: 3rem;
    font-weight: 900;
    color: var(--rule);
    line-height: 1;
    letter-spacing: -0.05em;
    flex-shrink: 0;
  }
  .section-info {}
  .section-label {
    font-size: 8px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--ink-light);
    margin-bottom: 3px;
  }
  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.25rem;
    font-weight: 700;
    line-height: 1.2;
  }
  hr.rule { border: none; border-top: 1px solid var(--rule); margin-bottom: 32px; }

  /* â”€â”€ ASSUMPTION BOX â”€â”€ */
  .assumption-box {
    background: var(--blue-pale);
    border-left: 3px solid var(--blue);
    padding: 16px 20px;
    margin-bottom: 36px;
    display: flex;
    gap: 20px;
    align-items: flex-start;
    flex-wrap: wrap;
  }
  .assumption-box span {
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--blue);
    flex-shrink: 0;
    margin-top: 1px;
  }
  .assumption-box p {
    font-size: 11px;
    color: var(--blue);
    opacity: 0.8;
    line-height: 1.7;
  }
  .assumption-box strong { opacity: 1; font-weight: 500; }

  /* â”€â”€ IMPACT ROWS â”€â”€ */
  .impact-list { display: flex; flex-direction: column; gap: 1px; }

  .impact-row {
    display: grid;
    grid-template-columns: 32px 1fr auto;
    align-items: start;
    gap: 20px;
    padding: 22px 0;
    border-bottom: 1px solid var(--rule);
    opacity: 0;
    transform: translateX(-8px);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }
  .impact-row.visible { opacity: 1; transform: translateX(0); }

  .impact-icon {
    font-size: 18px;
    margin-top: 2px;
    text-align: center;
  }
  .impact-body {}
  .impact-title {
    font-size: 9px;
    letter-spacing: 2.5px;
    text-transform: uppercase;
    margin-bottom: 6px;
  }
  .impact-title.saved { color: var(--green); }
  .impact-title.risk  { color: var(--red); }
  .impact-title.opp   { color: var(--amber); }
  .impact-narrative {
    font-family: 'Playfair Display', serif;
    font-size: 0.95rem;
    font-weight: 400;
    line-height: 1.7;
    color: var(--ink-mid);
    max-width: 520px;
  }
  .impact-narrative strong { color: var(--ink); font-weight: 700; }

  .impact-amount {
    text-align: right;
    flex-shrink: 0;
  }
  .amount-label {
    font-size: 8px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--ink-light);
    margin-bottom: 4px;
  }
  .amount-value {
    font-size: 1.3rem;
    font-weight: 500;
    letter-spacing: -0.03em;
    white-space: nowrap;
  }
  .amount-value.saved { color: var(--green); }
  .amount-value.risk  { color: var(--red); }
  .amount-value.opp   { color: var(--amber); }
  .amount-count {
    font-size: 9px;
    color: var(--ink-light);
    letter-spacing: 1px;
    margin-top: 2px;
  }

  /* â”€â”€ NET VALUE â”€â”€ */
  .net-block {
    background: var(--ink);
    color: var(--paper);
    padding: 28px 28px;
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: 24px;
    margin-top: 2px;
    opacity: 0;
    transform: translateY(8px);
    transition: opacity 0.6s ease 0.4s, transform 0.6s ease 0.4s;
  }
  .net-block.visible { opacity: 1; transform: translateY(0); }
  .net-label-sm {
    font-size: 8px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: rgba(250,248,245,0.45);
    margin-bottom: 6px;
  }
  .net-conclusion {
    font-family: 'Playfair Display', serif;
    font-size: 0.9rem;
    font-style: italic;
    line-height: 1.7;
    color: rgba(250,248,245,0.75);
    max-width: 420px;
  }
  .net-conclusion em { font-style: normal; color: var(--paper); font-weight: 700; }
  .net-number-wrap { text-align: right; flex-shrink: 0; }
  .net-number-label {
    font-size: 8px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: rgba(250,248,245,0.4);
    margin-bottom: 6px;
  }
  .net-number {
    font-family: 'Playfair Display', serif;
    font-size: 2rem;
    font-weight: 900;
    color: #7ecfa0;
    letter-spacing: -0.03em;
    white-space: nowrap;
  }
  .net-sub {
    font-size: 9px;
    color: rgba(250,248,245,0.35);
    letter-spacing: 1px;
    margin-top: 4px;
  }

  /* â”€â”€ FEATURE IMPORTANCE CHART â”€â”€ */
  .chart-wrap {
    position: relative;
  }

  .chart-note {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: var(--amber-pale);
    border: 1px solid #e8c87c;
    padding: 8px 14px;
    font-size: 10px;
    color: var(--amber);
    letter-spacing: 0.5px;
    margin-bottom: 32px;
    line-height: 1.5;
  }
  .chart-note::before { content: 'âš‘'; font-size: 12px; flex-shrink: 0; }

  .feat-row {
    display: grid;
    grid-template-columns: 140px 1fr 64px;
    align-items: center;
    gap: 16px;
    margin-bottom: 10px;
    opacity: 0;
    transform: translateX(-6px);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }
  .feat-row.visible { opacity: 1; transform: translateX(0); }

  .feat-name {
    font-size: 10px;
    letter-spacing: 0.5px;
    text-align: right;
    color: var(--ink-mid);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .feat-name.top3 { color: var(--ink); font-weight: 500; }

  .bar-track {
    height: 20px;
    background: var(--rule);
    position: relative;
    display: flex;
    align-items: center;
  }
  /* zero line at center or at left depending on positive/negative */
  .bar-fill {
    height: 100%;
    position: absolute;
    transition: width 1s cubic-bezier(0.4,0,0.2,1);
  }
  .bar-fill.positive {
    left: 50%;
    background: var(--red);
    opacity: 0.75;
  }
  .bar-fill.negative {
    right: 50%;
    background: var(--blue);
    opacity: 0.75;
  }
  .bar-fill.top3.positive { opacity: 1; }
  .bar-fill.top3.negative { opacity: 1; }
  .zero-line {
    position: absolute;
    left: 50%;
    top: 0; bottom: 0;
    width: 1px;
    background: var(--ink);
    opacity: 0.2;
  }

  .feat-coef {
    font-size: 10px;
    letter-spacing: 0.5px;
    text-align: left;
  }
  .feat-coef.positive { color: var(--red); }
  .feat-coef.negative { color: var(--blue); }
  .feat-coef.top3 { font-weight: 500; }

  .chart-legend {
    display: flex;
    gap: 28px;
    margin-top: 22px;
    padding-top: 18px;
    border-top: 1px solid var(--rule);
  }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 9px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--ink-light);
  }
  .legend-dot { width: 10px; height: 10px; border-radius: 1px; }

  /* â”€â”€ FOOTER â”€â”€ */
  .report-footer {
    margin-top: 80px;
    padding-top: 20px;
    border-top: 1px solid var(--rule);
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 8px;
  }
  .report-footer p { font-size: 8px; letter-spacing: 1.5px; text-transform: uppercase; color: var(--ink-light); }
</style>
</head>
<body>
<div class="page">

  <!-- HEADER -->
  <header class="report-header">
    <div>
      <div class="report-tag">Ringkasan Eksekutif Â· Model Prediksi Kredit</div>
      <h1 class="report-title">Narasi <em>Dampak Bisnis</em><br>& Faktor Penentu Keputusan</h1>
    </div>
    <div class="report-meta">
      Model: Logistic Regression<br>
      Test Set: 1.992 nasabah<br>
      Avg. Pinjaman: Rp 17.949.277<br>
      Bunga Target: 12,5% / Rp 2.243.660
    </div>
  </header>

  <!-- SECTION 1: BUSINESS NARRATIVE -->
  <section class="section">
    <div class="section-header">
      <div class="section-num">01</div>
      <div class="section-info">
        <div class="section-label">Analisis Dampak</div>
        <div class="section-title">Narasi Bahasa Manajemen</div>
      </div>
    </div>
    <hr class="rule">

    <div class="assumption-box">
      <span>Asumsi</span>
      <p>Menggunakan nilai aktual dari dataset: rata-rata pinjaman <strong>Rp 17.949.277</strong> (<code>df['loan_amount'].mean() Ã— 1000</code>), dengan target keuntungan bunga <strong>12,5% = Rp 2.243.660 per pinjaman</strong>. Model menggunakan <em>class_weight='balanced'</em> dan threshold probabilitas 0,56.</p>
    </div>

    <div class="impact-list" id="impactList">

      <div class="impact-row" data-delay="0">
        <div class="impact-icon">ðŸ›¡</div>
        <div class="impact-body">
          <div class="impact-title saved">Modal yang Berhasil Diselamatkan Â· True Positive</div>
          <p class="impact-narrative">
            Model kita berhasil mendeteksi <strong>89 calon nasabah</strong> yang berpotensi kuat gagal bayar. Dengan menolak mereka sebelum pencairan, model ini secara langsung mencegah kerugian modal sebesar <strong>Rp 1,597 Miliar</strong>.
          </p>
        </div>
        <div class="impact-amount">
          <div class="amount-label">Diselamatkan</div>
          <div class="amount-value saved">Rp 1,597 M</div>
          <div class="amount-count">89 Ã— Rp 17.949.277</div>
        </div>
      </div>

      <div class="impact-row" data-delay="100">
        <div class="impact-icon">âš </div>
        <div class="impact-body">
          <div class="impact-title risk">Nasabah Macet yang Lolos Â· False Negative</div>
          <p class="impact-narrative">
            Model ini tidak sempurna. Ada <strong>68 nasabah macet</strong> yang diprediksi lancar sehingga tetap dicairkan pinjamannya. Ini merepresentasikan risiko kerugian modal aktif yang harus diantisipasi dengan strategi mitigasi lain, seperti monitoring berkala.
          </p>
        </div>
        <div class="impact-amount">
          <div class="amount-label">Risiko Aktif</div>
          <div class="amount-value risk">Rp 1,221 M</div>
          <div class="amount-count">68 Ã— Rp 17.949.277</div>
        </div>
      </div>

      <div class="impact-row" data-delay="200">
        <div class="impact-icon">ðŸ“‰</div>
        <div class="impact-body">
          <div class="impact-title opp">Alarm Palsu Â· False Positive</div>
          <p class="impact-narrative">
            Karena model dikalibrasi untuk lebih berhati-hati, ada <strong>473 nasabah yang sebenarnya lancar</strong> namun ikut tertolak. Tidak ada kerugian modal di sini â€” namun ada potensi keuntungan bunga yang tidak terealisasi sebesar <strong>Rp 1,061 Miliar</strong>.
          </p>
        </div>
        <div class="impact-amount">
          <div class="amount-label">Peluang Hilang</div>
          <div class="amount-value opp">Rp 1,061 M</div>
          <div class="amount-count">473 Ã— Rp 2.243.660</div>
        </div>
      </div>

    </div>

    <!-- NET BLOCK -->
    <div class="net-block" id="netBlock">
      <div>
        <div class="net-label-sm">Kesimpulan Eksekutif</div>
        <p class="net-conclusion">
          Meskipun ada potensi keuntungan bunga yang hilang akibat alarm palsu,
          modal yang berhasil diselamatkan (<em>Rp 1,597 Miliar</em>) tetap lebih besar
          dari peluang yang terlewat (<em>Rp 1,061 Miliar</em>) â€” menghasilkan
          nilai bersih yang positif bagi institusi.
        </p>
      </div>
      <div class="net-number-wrap">
        <div class="net-number-label">Net Protected Value</div>
        <div class="net-number" id="netNumber">Rp 0</div>
        <div class="net-sub">Modal Selamat âˆ’ Peluang Hilang</div>
      </div>
    </div>

  </section>

  <!-- SECTION 2: FEATURE IMPORTANCE -->
  <section class="section">
    <div class="section-header">
      <div class="section-num">02</div>
      <div class="section-info">
        <div class="section-label">Interpretasi Model</div>
        <div class="section-title">Faktor Penentu Keputusan Model</div>
      </div>
    </div>
    <hr class="rule">

    <!-- <div class="chart-note">
      Nilai koefisien di bawah bersifat indikatif berdasarkan analisis EDA. Ganti dengan nilai aktual dari <code>model_lr.coef_[0]</code> untuk presisi penuh.
    </div> -->

    <div class="chart-wrap" id="chartWrap">
      <!-- Features: sorted by abs(coef) descending -->
      <!-- format: name, coef, is_top3 -->
    </div>

    <div class="chart-legend">
      <div class="legend-item">
        <div class="legend-dot" style="background:var(--red);opacity:0.9"></div>
        Positif â€” meningkatkan risiko gagal bayar
      </div>
      <div class="legend-item">
        <div class="legend-dot" style="background:var(--blue);opacity:0.9"></div>
        Negatif â€” menurunkan risiko gagal bayar
      </div>
    </div>
  </section>

  <footer class="report-footer">
    <p>Logistic Regression Â· class_weight=balanced Â· threshold 0.56</p>
    <p>Avg Pinjaman: Rp 17.949.277 Â· Bunga 12,5% = Rp 2.243.660 Â· Test set: 1.992 records</p>
  </footer>

</div>

<script>
  // â”€â”€ FEATURE DATA â”€â”€
  // Replace coef values with model_lr.coef_[0] from your notebook
  const features = [
    { name: 'loan_amount',       coef:  0.8486, top3: true  },
    { name: 'income',            coef: -0.2530, top3: true  },
    { name: 'credit_score',      coef: -0.1383, top3: true  },
    { name: 'loan_term_months',  coef: -0.1349, top3: false },
    { name: 'past_defaults',     coef:  0.1190, top3: false },
    { name: 'age',               coef: -0.0687, top3: false },
    { name: 'Other',             coef: -0.0476, top3: false },
    { name: 'employment_years',  coef: -0.0307, top3: false },
    { name: 'Business',          coef:  0.0272, top3: false },
    { name: 'Home',              coef:  0.0257, top3: false },
    { name: 'Education',         coef: -0.0246, top3: false },
    { name: 'num_dependents',    coef: -0.0185, top3: false },
    { name: 'Car',               coef:  0.0053, top3: false },
  ];
  // Already sorted by abs(coef) desc

  const maxAbs = Math.max(...features.map(f => Math.abs(f.coef)));
  const chartWrap = document.getElementById('chartWrap');

  features.forEach((f, i) => {
    const pct = (Math.abs(f.coef) / maxAbs) * 48; // max 48% of track width
    const dir = f.coef >= 0 ? 'positive' : 'negative';
    const top3cls = f.top3 ? 'top3' : '';
    const sign = f.coef >= 0 ? '+' : '';

    const row = document.createElement('div');
    row.className = 'feat-row';
    row.dataset.delay = i * 60;
    row.innerHTML = `
      <div class="feat-name ${top3cls}">${f.name.replace(/_/g, '_<wbr>')}</div>
      <div class="bar-track">
        <div class="zero-line"></div>
        <div class="bar-fill ${dir} ${top3cls}" data-pct="${pct}" style="width:0"></div>
      </div>
      <div class="feat-coef ${dir} ${top3cls}">${sign}${f.coef.toFixed(2)}</div>
    `;
    chartWrap.insertBefore(row, chartWrap.querySelector('.chart-legend'));
    chartWrap.appendChild(row);
  });

  // â”€â”€ INTERSECTION OBSERVER FOR ANIMATIONS â”€â”€
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;
      const el = entry.target;
      const delay = parseInt(el.dataset.delay || 0);
      setTimeout(() => {
        el.classList.add('visible');
        // animate bars
        el.querySelectorAll('.bar-fill').forEach(bar => {
          bar.style.width = bar.dataset.pct + '%';
        });
      }, delay);
      observer.unobserve(el);
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.impact-row, .feat-row').forEach(el => observer.observe(el));

  // â”€â”€ NET BLOCK ANIMATION â”€â”€
  const netObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;
      entry.target.classList.add('visible');
      // count up net number
      const target = 536_234_473;
      let current = 0;
      const step = target / 50;
      const fmt = (n) => 'Rp ' + Math.round(n / 1_000_000).toLocaleString('id-ID') + ' Jt';
      const numEl = document.getElementById('netNumber');
      const interval = setInterval(() => {
        current = Math.min(current + step, target);
        numEl.textContent = fmt(current);
        if (current >= target) clearInterval(interval);
      }, 18);
      netObserver.unobserve(entry.target);
    });
  }, { threshold: 0.3 });

  netObserver.observe(document.getElementById('netBlock'));
</script>
</body>
</html>
